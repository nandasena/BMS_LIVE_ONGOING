<ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="large" color="#fff" type="ball-clip-rotate-multiple"></ngx-spinner>
<div class="modal-header" style="padding: 0px;">
  <span>Create New Invoice</span>
  <!-- <button class="close" aria-label="Close" (click)="closeModal()"></button> -->
  <span aria-hidden="true"></span>
</div>
<div class="modal-body">
  <form>
    <div class="form-group row">
      <div class="col-sm-8 col-form-label">
        <div class="row">
          <label for="inputEmail1" class="col-sm-2" style="padding-top: 3px;">Invoice No:</label>
          <div class="col-sm-3" style="padding:0px;">
            <input type="email" class="form-control-sm" placeholder="Invoice No:">
          </div>
          <label for="inputEmail1" class="col-sm-2 col-form-label" style="padding-top: 3px;">Invoice Date:</label>
          <!-- <div class="col-sm-3" style="padding:0px;">
            <input type="email" class="form-control-sm"
              placeholder="Invoice Date:">
          </div> -->
          <div class="col-sm-3">
            <my-date-picker name="mydate" [options]="myDatePickerOptions" [(ngModel)]="model" required></my-date-picker>
          </div>
        </div>

      </div>
    </div>


    <div class="form-group row">
      <div class="col-sm-8 col-form-label">
        <div class="row">
          <div class="col-sm-2" style="padding: 0px;"></div>
          <div class="col-md-3" style="padding: 0px;padding-right:5px;">
            <select class="form-control-sm" #selectedCategory (change)="getSubCategory($event.target.value)"
              style="width: 100%">
              <option selected [value]="-1">Select Category</option>
              <option *ngFor="let mainCategory of this.mainCategoryList" [value]="mainCategory.mainCategoryId">{{ mainCategory.name }}
              </option>
              <!-- <option>test1</option>
              <option>test2</option>
              <option>test3</option> -->
            </select>
          </div>
          <div class="col-md-3" style="padding: 0px; padding-left: 5px;">
            <select class="form-control-sm" #selectedCategory (change)="getItemsOfRelevetCategory($event.target.value)"
              style="width: 100%">
              <option selected [value]="-1">Select Sub-Category</option>
              <option *ngFor="let subCategory of this.selectedSubCategory" [value]="subCategory.subCategoryId">{{ subCategory.name }}
              </option>
              <!-- <option>test1</option>
              <option>test2</option>
              <option>test3</option> -->
            </select>
          </div>
          <div class="col-md-3">
            <select class="form-control-sm" #selectedInventoryItem style="width: 100%">
              <option selected [value]="-1">Select Item</option>
              <option *ngFor="let categoryWiseItem of categoryWiseItemList" [value]="categoryWiseItem.itemId">
                {{ categoryWiseItem.description }}</option>

            </select>

            <button style="display: none;" id="myBtn"></button>
          </div>
          <div class="col-md-1" style="padding-left:0px;padding-right:0px;">
            <button type="button" class="btn btn-md btn-success btn-sm" style="height: 35px;padding-top: 8px;"
              (click)="addSelectedItemToTable(selectedInventoryItem.value)">
              <span class="" style="color: black;">&#x2b;</span>
            </button>
          </div>
        </div>
      </div>
    </div>
    <div class="row form-group" style="height: 400px;overflow-y: auto;">
      <table class="table table-striped table-fixed table-fixedResList">
        <thead>
          <tr>
            <th style="font-weight: bold;">#</th>
            <th style="font-weight: bold;">Category</th>
            <th>Items</th>
            <th>Qty</th>
            <th>Available</th>
            <th>Price</th>
            <th>Total</th>
            <th>Remove</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of itemToSave let i = index" aria-required="true">
            <td>{{item.id}}</td>
            <td>{{item.subCategoryId}}</td>
            <td>{{item.name}}</td>
            <td>
              <input type="text" ng-maxlength="3" class="table-number " name="tblQty" value="{{item.sellingQuantity}}"
                (change)=changeQty(item.itemDetailId,$event.target.value) numbersOnly>
            </td>
            <td>{{item.availableQuantity}}</td>
            <td>{{item.price}}</td>
            <td>{{item.price * item.sellingQuantity }}</td>
            <td style="padding: 0px;padding-top:7px;">
              <button type="button" class="btn btn-default main-buttons-sub" style="height: 35px;padding-top: 8px;"
                (click)="removeItem(item.itemDetailId)">
                <span class="" style="color: black;">&#x2b;</span>
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

  </form>
</div>

  <div class="row">
    <div class="col-md-5">
      <div class="row form-group">
        <div class="col-md-4 main-font hidden-sm" style="padding-top: 20px;">
          <label for="amount">Net Total</label>
        </div>
        <div class="col-md-8 main-font form-group mb-2">
          <input class="text-right form-control" id="amount" type="text" name="amount" value="{{totalAmount | number:'1.2-2'}}"
            placeholder="0.00" readonly>
        </div>
      </div>
    </div>
    <div class="col-md-4">

      </div>
    <div class="col-md-3">
      <button class="btn btn-md btn-success" (click)="saveInvoice()">Create</button>
      <button class="btn btn-hero-secondary btn-demo" (click)="closeModal()">Close</button>
    </div>
  </div>
  <div class="row">
      <div class="col-md-5">
          <div class="row form-group">
            <div class="col-md-4 main-font hidden-sm" style="padding-top: 20px;">
              <label for="amount">Cash</label>
            </div>
            <div class="col-md-8 main-font form-group mb-2">
              <input class="text-right form-control" (change)="getBalanceAmount($event.target.value)" id="cash" type="text" name="cash" value="{{cash | number:'1.2-2'}}"
                placeholder="0.00" numbersOnly>
            </div>
          </div>
        </div>
  </div>
  <div class="row">
    <div class="col-md-5">
        <div class="row form-group">
          <div class="col-md-4 main-font hidden-sm" style="padding-top: 20px;">
            <label for="amount">Balance</label>
          </div>
          <div class="col-md-8 main-font form-group mb-2">
            <input class="text-right form-control" id="balance" type="text" name="balance" value="{{balance | number:'1.2-2'}}"
              placeholder="0.00" readonly>
          </div>
        </div>
      </div>
</div>

<div id="myModal" class="modal"
  style="position: absolute; top: 263px; right:400px; bottom: 0; left:400px; z-index: 10040; overflow: auto; overflow-y: auto;">
  <div class="modal-content" style="padding: 10px;">
    <span class="close" (click)="closeModal()">&times;</span>
    <p>Price List</p>
    <select class="form-control-sm" #ItemDetails (change)="selectedItemDetails($event.target.value)">
      <option selected disabled>Select Price</option>
      <option *ngFor="let itemDetail of itemDetailList" [value]="itemDetail.itemDetailId"> Price
        {{ itemDetail.mrpPrice }} Quantity {{ itemDetail.quantity }}
      </option>
    </select>
  </div>
</div>